(function(t){function e(e){for(var n,i,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,r=1;r<o.length;r++){var c=o[r];0!==s[c]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},s={app:0},a=[];function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("6868"),s=o.n(n);s.a},"04ac":function(t,e,o){},2415:function(t,e,o){"use strict";var n=o("04ac"),s=o.n(n);s.a},"56d7":function(t,e,o){"use strict";o.r(e),o.d(e,"bus",(function(){return $}));o("5db0"),o("949c"),o("1759"),o("bfff");var n=o("ed16"),s=o("b2aa"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",{staticClass:"container"},[o(t.currentComp,{tag:"component"})],1)])},i=[],r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"weather-side"},[o("div",{staticClass:"weather-gradient"}),o("div",{staticClass:"date-container"},[o("i",{staticClass:"location-icon",attrs:{"data-feather":"map-pin"}}),o("h2",{staticClass:"location"},[t._v(t._s(t.store.weather.name))]),o("button",{staticClass:"tooltip",attrs:{disabled:"options"===t.currentComp,id:"options_btn"},on:{click:function(e){return t.switchComponent("options")}}},[o("span",{staticClass:"tooltiptext"},[t._v("Settings")])])]),o("div",{staticClass:"weather-container"},[o("i",{staticClass:"weather-icon",attrs:{"data-feather":"sun"}}),o("div",{attrs:{id:"weather-icon"}},[o("img",{attrs:{src:"img/weather/"+t.store.weather.icon,alt:t.store.weather.icon}})]),o("h1",{staticClass:"weather-temp"},[t._v(t._s(t.store.weather.currentTemp)+" "+t._s("metric"==this.units?"C":"F")+" ")]),o("h3",{staticClass:"weather-desc"},[t._v(t._s(t.store.weather.description))]),o("div",{staticClass:"today-info"},[o("div",{staticClass:"feelslike"},[o("span",{staticClass:"title"},[t._v("Feels like")]),o("span",{staticClass:"value"},[t._v(t._s(t.store.weather.feelslike))]),o("div",{staticClass:"clear"})]),t._m(0),o("div",{staticClass:"humidity"},[o("span",{staticClass:"title"},[t._v("Humidity")]),o("span",{staticClass:"value"},[t._v(t._s(t.store.weather.humidity)+" ")]),o("div",{staticClass:"clear"})]),o("div",{staticClass:"wind"},[o("span",{staticClass:"title"},[t._v("Wind")]),o("span",{staticClass:"value"},[t._v(t._s(t.store.weather.windspeed))]),o("div",{staticClass:"clear"})])])])])])},c=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"precipitation"},[o("span",{staticClass:"title"},[t._v("Rain")]),o("span",{staticClass:"value"},[t._v("0 %")]),o("div",{staticClass:"clear"})])}],l={data:function(){return{city:"",temperature:0,units:localStorage.getItem("units")}},props:{currentComp:{type:String,required:!0}},mounted:function(){console.log("mounting search..."),this.selectCity()},computed:{store:function(){return this.$store.state}},methods:{switchComponent:function(t){$.$emit("switchComp",t)},getUnits:function(){this.units=localStorage.getItem("units"),""==this.units||null==this.units||this.units.length<1||"metric"===this.units?(console.log("ucf=C"),this.uCF="°C"):(console.log("ucf=f"),this.uCF="°F")},selectCity:function(t){var e=this,o=this.store.inputQuery;console.log("saved city is "+o);var n=""===o||void 0===o?"London":o;console.log("Searching for : "+n+" def city="+t),this.$store.dispatch("inputQuery",n),console.log("setting app status in selectCity"),this.$store.dispatch("appStatus",{state:"loading"}),console.log("getting weather in selectCity"),this.$store.dispatch("weather").then((function(){return e.$store.dispatch("appStatus",{state:"loaded"})}))}}},u=l,d=(o("6ded"),o("6f6f")),p=Object(d["a"])(u,r,c,!1,null,null,null),h=p.exports,g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"search"},[o("div",{staticClass:"container"},[o("div",{staticClass:"weather-side"},[o("div",{staticClass:"weather-gradient"},[o("div",{staticClass:"date-container"},[o("h2",{staticClass:"location"},[t._v("Options")]),o("form",{on:{submit:function(e){return e.preventDefault(),t.selectCity(e)}}},[o("div",{attrs:{id:"units"}},[o("div",[t._v(" Units ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.units,expression:"units"}],attrs:{type:"radio",id:"metric",value:"metric"},domProps:{checked:t._q(t.units,"metric")},on:{change:[function(e){t.units="metric"},function(e){return t.changeUnits("metric")}]}}),o("label",{attrs:{for:"metric"}},[t._v("C")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.units,expression:"units"}],attrs:{type:"radio",id:"imperial",value:"imperial"},domProps:{checked:t._q(t.units,"imperial")},on:{change:[function(e){t.units="imperial"},function(e){return t.changeUnits("imperial")}]}}),o("label",{attrs:{for:"imperial"}},[t._v("F")])]),o("div",{attrs:{id:"searchCity"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],attrs:{id:"city",type:"search",placeholder:"Enter city name, country",size:"30"},domProps:{value:t.city},on:{input:function(e){e.target.composing||(t.city=e.target.value)}}}),o("button",{attrs:{value:"Search"},on:{click:function(e){return t.selectCity()}}},[t._v("Search")])]),o("div",{attrs:{id:"cityDetails"}},[o("div",[t._v(" Country: "+t._s(this.$store.state.weather.country)+" ")])]),o("div",{attrs:{id:"coords"}},[o("div",[t._v(" Lat:")]),t._v(" "+t._s(this.$store.state.weather.coords.lat)+" "),o("div",[t._v(" Lon:")]),t._v(" "+t._s(this.$store.state.weather.coords.lon)+" ")])]),o("div",{attrs:{id:"saveOptions"}},[o("button",{attrs:{id:"save",disabled:"weather"===t.currentComp},on:{click:function(e){return t.switchComponent("weather")}}},[t._v(" Save ")])])])])])])])},m=[],f=(o("03a1"),{data:function(){return{city:"",units:localStorage.getItem("units")}},props:{currentComp:{type:String,required:!0}},created:function(){this.city=this.$store.state.inputQuery},methods:{switchComponent:function(t){$.$emit("switchComp",t)},getCity:function(){this.city=this.store().inputQuery},changeUnits:function(t){this.$store.dispatch("changeUnits",t),localStorage.setItem("units",t)},browserGeoLocation:function(){var t=this;return new Promise((function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(o){console.log("search lat="+o.coords.latitude),console.log("search long="+o.coords.longitude),t.$store.dispatch("coords",{lat:o.coords.latitude,lon:o.coords.longitude}),e()}),(function(e){console.log("Unable to autodetect location. Please enter city manually"),t.gettingLocation=!1,t.errorStr=e.message,t.selectCity("London")}),{enableHighAccuracy:!0}):t.$store.dispatch("appStatus",{status:"error",message:"Cannot detect your location. Please search for your city"})}))},getBrowserLocation:function(){var t=this;console.log("getBrowserLocation()..."),this.browserGeoLocation().then((function(){t.$store.dispatch("weather","default").then((function(){return t.$store.dispatch("appStatus",{state:"loaded"})}))}))},selectCity:function(t){var e=this;console.log("Entered city = "+this.city);var o=0===this.city.length?"London":this.city;console.log("Searching for : "+o+" def city="+t),this.$store.dispatch("inputQuery",o),console.log("setting app status in selectCity"),this.$store.dispatch("appStatus",{state:"loading"}),console.log("getting weather in selectCity"),this.$store.dispatch("weather").then((function(){return e.$store.dispatch("appStatus",{state:"loaded"})}))}}}),v=f,y=(o("2415"),Object(d["a"])(v,g,m,!1,null,"8c6834ce",null)),w=y.exports,C={name:"App",data:function(){return{currentComp:"weather"}},created:function(){var t=this;$.$on("switchComp",(function(e){t.currentComp=e}))},components:{Weather:h,Options:w}},S=C,_=(o("034f"),Object(d["a"])(S,a,i,!1,null,null,null)),b=_.exports;o("89ee"),o("939d"),o("de3f"),o("998d");n["a"].use(s["a"]);var I={state:{status:{state:"loaded",message:null},data:{temperature:0,feelslike:null,windspeed:null,humidity:null,weather:null,desc:null},weather:{coords:{}},location:{},coords:{lat:0,lon:0},input:null,locationIcon:"search",description:null,inputQuery:null==localStorage.getItem("inputQuery")?"London":localStorage.getItem("inputQuery").slice(1,-1),units:null==localStorage.getItem("units")?"metric":localStorage.getItem("units").slice(1,-1)},mutations:{initializeStore:function(t){localStorage.getItem("state")&&this.replaceState(Object.assign(t.JSON.parse(localStorage.getItem("state")))),localStorage.getItem("inputQuery"),localStorage.setItem("inputQuery","London")},setAppStatus:function(t,e){t.status.state=e.state,t.status.message=e.message,localStorage.setItem("status",JSON.stringify(t.status))},setUnits:function(t,e){t.status.units=e,localStorage.setItem("units",JSON.stringify(e))},setCoordinates:function(t,e){t.coords.lat=e.lat,t.coords.lon=e.lon,localStorage.setItem("coords",JSON.stringify(t.coords))},setGeocode:function(t,e){t.geocode=e,t.coords.lat=e.geometry.location.lat,t.coords.lon=e.geometry.location.lng,localStorage.setItem("coords",JSON.stringify(t.coords))},setInputQuery:function(t,e){t.inputQuery=e,localStorage.setItem("inputQuery",JSON.stringify(t.inputQuery))},setWeather:function(t,e){t.weather=e}},actions:{appStatus:function(t,e){var o=t.commit;o("setAppStatus",e)},coords:function(t,e){var o=t.commit;o("setCoordinates",e)},inputQuery:function(t,e){var o=t.commit;o("setInputQuery",e)},getInputQuery:function(){var t=localStorage.getItem("inputQuery");return""===t||null===t||t.length<1?t="London":t.slice(1,-1),console.log("inputQuery="+t),t},geocode:function(t,e){var o,n=t.commit,s=t.state;console.log("in geocode"),"default"===e?(console.log("default auto geo location query"),o="https://api.openweathermap.org/data/2.5/onecall?",o+="lat="+s.coords.lat+"&lon="+s.coords.long,o+="&units=metric&appid=103e41e1f9fdd4e18a872b70f4a1c251"):(console.log("searching for entered city"),o="https://api.openweathermap.org/data/2.5/weather?",o+="q="+s.inputQuery,o+="&units=metric&appid=103e41e1f9fdd4e18a872b70f4a1c251"),console.log("geocode url="+o),fetch(o).then((function(t){console.log("response="+t),200===t.status?t.json().then((function(t){t.length?(console.log("data="+t[0]),n("setGeocode",t[0])):n("setAppStatus",{state:"error",message:"No results found. Please try another search."})})):n("setAppStatus",{state:"error",message:"Uh oh, the geolocation API is not responding. Please try again."})})).catch((function(){console.log("error fetching geocode"),n("setAppStatus",{state:"error",message:"Uh oh, the geolocation API is not responding."})}))},weather:function(t,e){var o=t.commit,n=t.state;console.log("in weather state/index.js");var s,a=localStorage.getItem("units");(""==a||null==a||a.length<1)&&(a="metric"),console.log("units = "+a),"default"===e?(console.log("default weather location query"),s="https://api.openweathermap.org/data/2.5/onecall?",s+="lat="+n.coords.lat+"&lon="+n.coords.lon,s+="&units="+a,s+="&appid=103e41e1f9fdd4e18a872b70f4a1c251"):(s="https://api.openweathermap.org/data/2.5/weather?",s+="q="+n.inputQuery,s+="&units="+a,s+="&appid=103e41e1f9fdd4e18a872b70f4a1c251"),console.log("weather url="+s),fetch(s).then((function(t){200===t.status?t.json().then((function(t){if(console.log("weather data: "+t),t){console.log("setting weather data");var n={};"default"===e?(console.log("lat="+t.lat+" lon="+t.lon),n.coords={lat:t.lat,lon:t.lon},n.currentTemp=Math.round(t.current.temp),n.minTemp=Math.round(t.current.temp_min),n.maxTemp=Math.round(t.current.temp_max),n.feelslike=Math.round(t.current.feels_like),n.pressure=t.current.pressure,n.humidity=t.current.humidity+" %",n.windspeed=t.current.wind_speed+" m/s",n.description=t.current.weather[0].description,n.icon=t.current.weather[0].icon+"@2x.png",n.country=t.sys.country,n.raw=t):(n.coords={lat:t.coord.lat,lon:t.coord.lon},n.name=t.name,n.country=t.sys.country,n.currentTemp=Math.round(t.main.temp),n.minTemp=Math.round(t.main.temp_min),n.maxTemp=Math.round(t.main.temp_max),n.feelslike=Math.round(t.main.feels_like),n.pressure=t.main.pressure,n.humidity=t.main.humidity+" %",n.windspeed=t.wind.speed+" m/s",n.description=t.weather[0].description,n.icon=t.weather[0].icon+"@2x.png",n.raw=t),o("setWeather",n)}else o("setAppStatus",{state:"error",message:"No results found. Please try another search."})})):o("setAppStatus",{state:"error",message:"Uh oh, the geolocation API is not responding. Please try again."})})).catch((function(){console.log("error getting weather data"),o("setAppStatus",{state:"error",message:"Uh oh, the geolocation API is not responding."})}))}},modules:{}};n["a"].config.productionTip=!1;var $=new n["a"],O=new s["a"].Store(I);new n["a"]({el:"#app",store:O,beforeCreate:function(){this.$store.commit("initializeStore")},render:function(t){return t(b)}}),O.subscribe((function(t,e){localStorage.setItem("store",JSON.stringify(e))}))},6868:function(t,e,o){},"6ded":function(t,e,o){"use strict";var n=o("be35"),s=o.n(n);s.a},be35:function(t,e,o){}});
//# sourceMappingURL=app.f35915a5.js.map