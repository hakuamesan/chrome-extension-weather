(function(t){function e(e){for(var n,r,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],n=!0,i=1;i<o.length;i++){var c=o[i];0!==a[c]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=o[0]))}return t}var n={},a={app:0},s=[];function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("6868"),a=o.n(n);a.a},3060:function(t,e,o){"use strict";var n=o("ccab"),a=o.n(n);a.a},"56d7":function(t,e,o){"use strict";o.r(e),o.d(e,"bus",(function(){return O}));o("5db0"),o("949c"),o("1759"),o("bfff");var n=o("ed16"),a=o("b2aa"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",{staticClass:"container"},[o(t.currentComp,{tag:"component"})],1)])},r=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"weather-side"},[o("div",{staticClass:"weather-gradient"}),o("div",{staticClass:"date-container"},[o("i",{staticClass:"location-icon",attrs:{"data-feather":"map-pin"}}),o("h2",{staticClass:"location"},[t._v(t._s(t.store.weather.name))]),o("button",{attrs:{disabled:"options"===t.currentComp,id:"options_btn"},on:{click:function(e){return t.switchComponent("options")}}})]),o("div",{staticClass:"weather-container"},[o("i",{staticClass:"weather-icon",attrs:{"data-feather":"sun"}}),o("h1",{staticClass:"weather-temp"},[t._v(t._s(t.store.weather.currentTemp))]),o("h3",{staticClass:"weather-desc"},[t._v(t._s(t.store.weather.description))]),o("div",{staticClass:"today-info"},[o("div",{staticClass:"feelslike"},[o("span",{staticClass:"title"},[t._v("Feels like")]),o("span",{staticClass:"value"},[t._v(t._s(t.store.weather.feelslike))]),o("div",{staticClass:"clear"})]),t._m(0),o("div",{staticClass:"humidity"},[o("span",{staticClass:"title"},[t._v("Humidity")]),o("span",{staticClass:"value"},[t._v(t._s(t.store.weather.humidity)+" ")]),o("div",{staticClass:"clear"})]),o("div",{staticClass:"wind"},[o("span",{staticClass:"title"},[t._v("Wind")]),o("span",{staticClass:"value"},[t._v(t._s(t.store.weather.windspeed))]),o("div",{staticClass:"clear"})])])])])])},c=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"precipitation"},[o("span",{staticClass:"title"},[t._v("Rain")]),o("span",{staticClass:"value"},[t._v("0 %")]),o("div",{staticClass:"clear"})])}],l={data:function(){return{city:"",temperature:0}},props:{currentComp:{type:String,required:!0}},mounted:function(){console.log("mounting search..."),this.selectCity()},computed:{store:function(){return this.$store.state}},methods:{switchComponent:function(t){O.$emit("switchComp",t)},selectCity:function(t){var e=this,o=this.store.inputQuery;console.log("saved city is "+o);var n=""===o||void 0===o?"London":o;console.log("Searching for : "+n+" def city="+t),this.$store.dispatch("inputQuery",n),console.log("setting app status in selectCity"),this.$store.dispatch("appStatus",{state:"loading"}),console.log("getting weather in selectCity"),this.$store.dispatch("weather").then((function(){return e.$store.dispatch("appStatus",{state:"loaded"})}))}}},u=l,d=(o("6ded"),o("6f6f")),p=Object(d["a"])(u,i,c,!1,null,null,null),h=p.exports,f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"search"},[o("div",{staticClass:"container"},[o("div",{staticClass:"weather-side"},[o("div",{staticClass:"weather-gradient"},[o("div",{staticClass:"date-container"},[o("h2",{staticClass:"location"},[t._v("Options")]),o("button",{attrs:{disabled:"weather"===t.currentComp,id:"options_btn"},on:{click:function(e){return t.switchComponent("weather")}}}),o("form",{on:{submit:function(e){return e.preventDefault(),t.selectCity(e)}}},[t._m(0),t._m(1),o("div",{attrs:{id:"searchCity"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],attrs:{id:"city",type:"search",placeholder:"Enter city name, country",size:"30"},domProps:{value:t.city},on:{input:function(e){e.target.composing||(t.city=e.target.value)}}}),o("button",{attrs:{value:"Search"},on:{click:function(e){return t.selectCity()}}},[t._v("Search")])]),o("div",{attrs:{id:"cityDetails"}},[o("div",[t._v(" Country: "+t._s(this.$store.state.weather.country)+" ")])]),o("div",{attrs:{id:"coords"}},[o("div",[t._v(" Lat:")]),t._v(" "+t._s(this.$store.state.weather.coords.lat)+" "),o("div",[t._v(" Lon:")]),t._v(" "+t._s(this.$store.state.weather.coords.lon)+" ")])]),o("div",{attrs:{id:"saveOptions"}},[o("button",{attrs:{id:"save",disabled:"weather"===t.currentComp},on:{click:function(e){return t.switchComponent("weather")}}},[t._v(" Save ")])])])])])])])},m=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"units"}},[o("div",[t._v(" Units ")]),o("input",{attrs:{type:"radio",id:"metric",name:"units",value:"metric"}}),o("label",{attrs:{for:"metric"}},[t._v("C")]),o("input",{attrs:{type:"radio",id:"imperial",name:"units",value:"imperial"}}),o("label",{attrs:{for:"imperial"}},[t._v("F")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"showforecast"}},[o("div",[t._v(" 5 day Forecast ")]),o("input",{attrs:{type:"radio",id:"forecastyes",name:"forcast",value:"yes"}}),o("label",{attrs:{for:"yes"}},[t._v("Yes")]),o("input",{attrs:{type:"radio",id:"forecastno",name:"forecast",value:"no"}}),o("label",{attrs:{for:"no"}},[t._v("No")])])}],g=(o("03a1"),{data:function(){return{city:""}},props:{currentComp:{type:String,required:!0}},created:function(){this.city=this.$store.state.inputQuery},methods:{switchComponent:function(t){O.$emit("switchComp",t)},getCity:function(){this.city=this.store().inputQuery},browserGeoLocation:function(){var t=this;return new Promise((function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(o){console.log("search lat="+o.coords.latitude),console.log("search long="+o.coords.longitude),t.$store.dispatch("coords",{lat:o.coords.latitude,lon:o.coords.longitude}),e()}),(function(e){console.log("Unable to autodetect location. Please enter city manually"),t.gettingLocation=!1,t.errorStr=e.message,t.selectCity("London")}),{enableHighAccuracy:!0}):t.$store.dispatch("appStatus",{status:"error",message:"Cannot detect your location. Please search for your city"})}))},getBrowserLocation:function(){var t=this;console.log("getBrowserLocation()..."),this.browserGeoLocation().then((function(){t.$store.dispatch("weather","default").then((function(){return t.$store.dispatch("appStatus",{state:"loaded"})}))}))},selectCity:function(t){var e=this;console.log("Entered city = "+this.city);var o=0===this.city.length?"London":this.city;console.log("Searching for : "+o+" def city="+t),this.$store.dispatch("inputQuery",o),console.log("setting app status in selectCity"),this.$store.dispatch("appStatus",{state:"loading"}),console.log("getting weather in selectCity"),this.$store.dispatch("weather").then((function(){return e.$store.dispatch("appStatus",{state:"loaded"})}))}}}),v=g,y=(o("3060"),Object(d["a"])(v,f,m,!1,null,"c8d8e466",null)),w=y.exports,C={name:"App",data:function(){return{currentComp:"weather"}},created:function(){var t=this;O.$on("switchComp",(function(e){t.currentComp=e}))},components:{Weather:h,Options:w}},_=C,b=(o("034f"),Object(d["a"])(_,s,r,!1,null,null,null)),S=b.exports;o("89ee"),o("939d"),o("de3f"),o("998d");n["a"].use(a["a"]);var $={state:{status:{state:"loaded",message:null},data:{temperature:0,feelslike:null,windspeed:null,humidity:null,weather:null,desc:null},weather:{coords:{}},location:{},coords:{lat:0,lon:0},input:null,locationIcon:"search",description:null,inputQuery:localStorage.getItem("inputQuery").slice(1,-1)},mutations:{initializeStore:function(t){localStorage.getItem("state")&&this.replaceState(Object.assign(t.JSON.parse(localStorage.getItem("state")))),localStorage.getItem("inputQuery")||localStorage.setItem("inputQuery","London")},setAppStatus:function(t,e){t.status.state=e.state,t.status.message=e.message,localStorage.setItem("status",JSON.stringify(t.status))},setCoordinates:function(t,e){t.coords.lat=e.lat,t.coords.lon=e.lon,localStorage.setItem("coords",JSON.stringify(t.coords))},setGeocode:function(t,e){t.geocode=e,t.coords.lat=e.geometry.location.lat,t.coords.lon=e.geometry.location.lng,localStorage.setItem("coords",JSON.stringify(t.coords))},setInputQuery:function(t,e){t.inputQuery=e,localStorage.setItem("inputQuery",JSON.stringify(t.inputQuery))},setWeather:function(t,e){t.weather=e}},actions:{appStatus:function(t,e){var o=t.commit;o("setAppStatus",e)},coords:function(t,e){var o=t.commit;o("setCoordinates",e)},inputQuery:function(t,e){var o=t.commit;o("setInputQuery",e)},getInputQuery:function(){var t=localStorage.getItem("inputQuery");return""===t||null===t||t.length<1?t="London":t.slice(1,-1),console.log("inputQuery="+t),t},geocode:function(t,e){var o,n=t.commit,a=t.state;console.log("in geocode"),"default"===e?(console.log("default auto geo location query"),o="https://api.openweathermap.org/data/2.5/onecall?",o+="lat="+a.coords.lat+"&lon="+a.coords.long,o+="&units=metric&appid=103e41e1f9fdd4e18a872b70f4a1c251"):(console.log("searching for entered city"),o="https://api.openweathermap.org/data/2.5/weather?",o+="q="+a.inputQuery,o+="&units=metric&appid=103e41e1f9fdd4e18a872b70f4a1c251"),console.log("geocode url="+o),fetch(o).then((function(t){console.log("response="+t),200===t.status?t.json().then((function(t){t.length?(console.log("data="+t[0]),n("setGeocode",t[0])):n("setAppStatus",{state:"error",message:"No results found. Please try another search."})})):n("setAppStatus",{state:"error",message:"Uh oh, the geolocation API is not responding. Please try again."})})).catch((function(){console.log("error fetching geocode"),n("setAppStatus",{state:"error",message:"Uh oh, the geolocation API is not responding."})}))},weather:function(t,e){var o,n=t.commit,a=t.state;console.log("in weather state/index.js"),"default"===e?(console.log("default weather location query"),o="https://api.openweathermap.org/data/2.5/onecall?",o+="lat="+a.coords.lat+"&lon="+a.coords.lon,o+="&units=metric&appid=103e41e1f9fdd4e18a872b70f4a1c251"):(o="https://api.openweathermap.org/data/2.5/weather?",o+="q="+a.inputQuery,o+="&units=metric&appid=103e41e1f9fdd4e18a872b70f4a1c251"),console.log("weather url="+o),fetch(o).then((function(t){200===t.status?t.json().then((function(t){if(console.log("weather data: "+t),t){console.log("setting weather data");var o={};"default"===e?(console.log("lat="+t.lat+" lon="+t.lon),o.coords={lat:t.lat,lon:t.lon},o.currentTemp=t.current.temp+"°C",o.minTemp=t.current.temp_min+"°C",o.maxTemp=t.current.temp_max+"°C",o.feelslike=t.current.feels_like+"°C",o.pressure=t.current.pressure,o.humidity=t.current.humidity+"%",o.windspeed=t.current.wind_speed+"m/s",o.description=t.current.weather[0].description,o.icon=t.current.weather[0].icon+"@2x.png",o.country=t.sys.country,o.raw=t):(o.coords={lat:t.coord.lat,lon:t.coord.lon},o.name=t.name,o.country=t.sys.country,o.currentTemp=t.main.temp+"°C",o.minTemp=t.main.temp_min+"°C",o.maxTemp=t.main.temp_max+"°C",o.feelslike=t.main.feels_like+"°C",o.pressure=t.main.pressure,o.humidity=t.main.humidity+"%",o.windspeed=t.wind.speed+"m/s",o.description=t.weather[0].description,o.icon=t.weather[0].icon+"@2x.png",o.raw=t),n("setWeather",o)}else n("setAppStatus",{state:"error",message:"No results found. Please try another search."})})):n("setAppStatus",{state:"error",message:"Uh oh, the geolocation API is not responding. Please try again."})})).catch((function(){console.log("error getting weather data"),n("setAppStatus",{state:"error",message:"Uh oh, the geolocation API is not responding."})}))}},modules:{}};n["a"].config.productionTip=!1;var O=new n["a"],P=new a["a"].Store($);new n["a"]({el:"#app",store:P,beforeCreate:function(){this.$store.commit("initializeStore")},render:function(t){return t(S)}}),P.subscribe((function(t,e){localStorage.setItem("store",JSON.stringify(e))}))},6868:function(t,e,o){},"6ded":function(t,e,o){"use strict";var n=o("be35"),a=o.n(n);a.a},be35:function(t,e,o){},ccab:function(t,e,o){}});
//# sourceMappingURL=app.32997136.js.map